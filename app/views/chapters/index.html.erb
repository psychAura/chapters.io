<!-- Header -->
<header>
  <nav class="bg-gray-900 border-b border-gray-700 px-4 lg:px-6 py-2.5">
    <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-xl">
      <a href="#" class="flex items-center">
        <span class="self-center text-xl font-semibold whitespace-nowrap text-white">Chapters</span>
      </a>

      <div class="flex items-center lg:order-2">
        <a href="#" class="text-gray-300 hover:bg-gray-700 font-medium rounded-lg text-sm px-4 py-2 mr-2">Log in</a>
        <a href="#" class="text-white bg-blue-700 hover:bg-blue-800 font-medium rounded-lg text-sm px-4 py-2 mr-2">Get started</a>
        <button data-collapse-toggle="mobile-menu-2" type="button"
          class="inline-flex items-center p-2 ml-1 text-sm text-gray-400 rounded-lg lg:hidden hover:bg-gray-700"
          aria-controls="mobile-menu-2" aria-expanded="false">
          <span class="sr-only">Open main menu</span>
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"></path>
          </svg>
        </button>
      </div>

      <div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2">
        <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
          <li><a href="#" class="block py-2 pl-3 text-blue-400 lg:p-0">Home</a></li>
          <li><a href="#" class="block py-2 pl-3 text-gray-300 lg:p-0">Company</a></li>
          <li><a href="#" class="block py-2 pl-3 text-gray-300 lg:p-0">Team</a></li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<!-- Hero Section -->
<section class="bg-gray-900 py-12">
  <div class="max-w-screen-xl px-4 mx-auto lg:grid lg:grid-cols-12 lg:gap-8">
    <div class="lg:col-span-7 pt-16">
      <h1 class="text-5xl md:text-6xl font-extrabold mb-4 text-white">Discover Amazing Books</h1>
      <p class="mb-6 text-lg md:text-xl text-gray-400"> Your Top 10 New York Times Bestsellers!</p>
      <div class="flex flex-wrap gap-3">
        <a href="#" class="px-6 py-4 bg-blue-700 text-white rounded-lg text-lg md:text-xl">Receive Bookletters</a>
        <a href="#" class="px-6 py-4 border border-gray-600 rounded-lg text-gray-200 hover:bg-gray-800 text-lg md:text-xl">Personalize</a>
      </div>
    </div>

    <div class="mt-8 lg:mt-0 lg:col-span-5 flex justify-center">
      <img src="<%= asset_path('pngegg (4).png') %>" 
       alt="Books hero image" 
       class="w-64 sm:w-80 md:w-full h-auto">
    </div>

  </div>
</section>

<!-- Categories -->
<section class="py-12 bg-gray-900 text-gray-100">
  <div class="max-w-7xl mx-auto px-6 text-center">
    <h3 class="text-3xl font-semibold mb-6 text-white">Browse by Category</h3>
    <div class="flex flex-wrap justify-center gap-4 mb-10">
      <% @books_by_category.keys.each do |category| %>
        <button data-category="<%= category.parameterize %>"
          class="category-tab px-4 py-2 rounded-md bg-blue-600 hover:bg-purple-700 text-white font-medium transition">
          <%= category.titleize %>
        </button>
      <% end %>
    </div>

    <% @books_by_category.each do |category, books| %>
      <div id="category-<%= category.parameterize %>" class="category-grid hidden grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-12">
        <% books.each do |book| %>
          <div class="bg-gray-700 text-gray-100 rounded-lg shadow-lg hover:shadow-xl overflow-hidden">
            <img src="<%= book["book_image"] %>" alt="<%= book["title"] %>" class="w-full h-60 object-cover">
            <div class="p-4">
              <h3 class="font-semibold text-sm truncate"><%= book["title"] %></h3>
              <p class="text-xs text-gray-400 mb-2"><%= book["author"] %></p>
              <a href="<%= book["amazon_product_url"] %>" target="_blank" class="text-blue-400 hover:underline text-sm">Buy on Amazon</a>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</section>

<!-- Featured Book of the Week -->
<section class="bg-gray-900 py-16">
  <div class="max-w-6xl mx-auto px-6 text-center">
    <h2 class="text-3xl font-bold text-white mb-8">Featured Book of the Week</h2>
    <% if @featured_book %>
      <div class="bg-gray-850 rounded-xl shadow-lg p-6 flex flex-col md:flex-row items-center">
        <img src="<%= @featured_book["book_image"] %>" alt="<%= @featured_book["title"] %>" 
             class="w-40 h-60 object-cover rounded-md mb-6 md:mb-0 md:mr-6">
        <div class="text-left">
          <h3 class="text-2xl font-semibold text-white"><%= @featured_book["title"] %></h3>
          <p class="text-gray-300 text-sm mb-2">by <%= @featured_book["author"] %></p>
          <p class="text-gray-400 mb-4"><%= truncate(@featured_book["description"], length: 150) %></p>
          <div class="flex gap-3">
            <a href="<%= @featured_book["amazon_product_url"] %>" target="_blank"
               class="px-4 py-2 bg-blue-600 rounded-lg text-white hover:bg-blue-700">Buy Now</a>
            <button class="px-4 py-2 border border-gray-500 rounded-lg text-gray-300 hover:bg-gray-600">
              ‚≠ê Star
            </button>
          </div>
        </div>
      </div>
    <% else %>
      <p class="text-gray-400">Loading featured book...</p>
    <% end %>
  </div>
</section>

<!-- Newsletter Signup -->
<section class="bg-gray-800 py-16">
  <div class="max-w-4xl mx-auto text-center px-6">
    <h2 class="text-3xl font-bold text-white mb-4">Get Weekly Bookletters</h2>
    <p class="text-gray-400 mb-6">Subscribe and receive our Book of the Week directly in your inbox.</p>
    <form class="flex flex-col sm:flex-row justify-center gap-3">
      <input type="email" placeholder="Enter your email"
             class="px-4 py-3 rounded-lg w-full sm:w-2/3 bg-gray-800 text-white border border-gray-600">
      <button type="submit"
              class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Subscribe</button>
    </form>
  </div>
</section>


<!-- Tabs JS -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const tabs = document.querySelectorAll(".category-tab");
    const grids = document.querySelectorAll(".category-grid");

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        grids.forEach(grid => grid.classList.add("hidden"));
        const categoryId = tab.getAttribute("data-category");
        const grid = document.getElementById(`category-${categoryId}`);
        if (grid) grid.classList.remove("hidden");
      });
    });

    if (grids.length > 0) grids[0].classList.remove("hidden");
  });
</script>
